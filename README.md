# cert_inspector Ansible Role

## Описание
Роль **cert_inspector** предназначена для автоматизированного сканирования системных каталогов на наличие SSL-сертификатов, сбора их метаданных (срок действия, выдавший орган, имя хоста) и предоставления метрик в формате, совместимом с Prometheus. Это позволяет отслеживать состояние сертификатов в реальном времени и предотвращать их истечение срока действия.

### Основные задачи:
- Сканирование каталогов с помощью модуля `find`.
- Извлечение информации о сертификатах через `community.crypto.x509_certificate_info`.
- Генерация метрик в файле через шаблон Jinja2 для последующей интеграции с Prometheus через NGinx.
- Гибкая настройка параметров сканирования (вложенность, маски, фильтры).

## Отличия от обычных экспортеров
- **Интеграция с Ansible**: Использует существующую инфраструктуру Ansible, не требуя отдельных демонов или сервисов.
- **Автоматизация поиска**: Поддерживает параметризуемый поиск файлов, включая игнорирование символических ссылок и ограничение размера файлов.
- **Гибкость настройки**: Позволяет задавать уникальные параметры для каждой директории (путь, глубина сканирования, фильтры) с возможностью использования значений по умолчанию.

## Требования
- **Ansible** ≥ 2.10.
- Модуль `community.crypto` (установить через `ansible-galaxy collection install community.crypto`).
- Python ≥ 3.6.
- Jinja2 для обработки шаблонов.
- NGinx для отдачи метрик Prometheus.
- Доступ к каталогам с сертификатами (права чтения).

## Установка
Вручную из репозитория::
```bash
git clone https://github.com/sbelyanin/cert_inspector.git
cd cert_inspector
```
